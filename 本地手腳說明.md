# 築未科技 — 本地手腳說明

**目的**：AI 工作流已有八階段與 TOOLS，本地需可雙擊或 CLI 執行的「手腳」；本說明對應腳本與用法。

---

## 入口一覽

| 類型 | 檔案 | 用途 |
|------|------|------|
| **CLI** | `scripts/run_workflow_step.py` | 統一入口：單次任務、運算、生成、視覺與報表 |
| **雙擊** | `執行_單次任務.bat` | 輸入任務後跑完整 ReAct 八階段 |
| **雙擊** | `執行_視覺與報表.bat` | 對 `D:\brain_workspace\input` 做視覺辨識並寫入 Z 槽報表 |

---

## run_workflow_step.py 參數

| --step | 說明 | 必填參數 |
|--------|------|----------|
| `單次任務` | 完整八階段 ReAct | `--task "任務內容"` |
| `運算` | 對目錄內圖片跑視覺辨識，輸出逗號分隔 detected | `--input` 目錄（預設 D:\brain_workspace\input） |
| `生成` | 依 detected 寫入 Z 槽 Reports（JSONL + CSV） | `--detected "物件1,物件2,..."` |
| `視覺與報表` | 運算 + 生成一鍵 | `--input` 目錄（同上） |

**範例：**

```bat
python scripts/run_workflow_step.py --step 單次任務 --task "請列出 D:\brain_workspace 目錄"
python scripts/run_workflow_step.py --step 運算 --input D:\brain_workspace\input
python scripts/run_workflow_step.py --step 生成 --detected "鋼筋,模板,混凝土"
python scripts/run_workflow_step.py --step 視覺與報表 --input D:\brain_workspace\input
```

---

## 與工作流對齊

| 工作流 | 本地手腳 |
|--------|----------|
| 編碼／撰寫／執行／回饋 | `--step 單次任務`（經 AgentManager 與 TOOLS） |
| 運算 | `--step 運算` 或 `執行_視覺與報表.bat`（前半） |
| 生成 | `--step 生成` 或 `執行_視覺與報表.bat`（後半） |
| 分配 | 由 AgentManager 在單次任務內完成，無獨立腳本 |

路徑限 D/Z；視覺引擎與報表分流不更動 `agent_tools`、`report_generator` 既有邏輯。

---

*實作須遵守架構守則與全系統架構鎖定規則。*

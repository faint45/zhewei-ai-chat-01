# 築未科技 — 寫入及部屬

**用途**：紀錄本次寫入內容與部屬步驟，供後續 push、D 槽部屬、Railway 部屬使用。

---

## 一、本次寫入（已提交）

- **Git**：已 `git init`，已 `git add -A`，已 `git commit`（訊息：docs and deploy: MCP tools, Railway, brain_server, handover）。
- **文件**：給CodeBuddy接續部屬說明、接續部屬移交報告、本地AI系統缺口清單、可呼叫的MCP工具、可以符合的Win_MCP清單、如何運用MCP當手腳 等更新。
- **程式**：brain_server（/health 擴充、/static、/admin、PORT 支援 Railway）、Procfile、requirements.txt、runtime.txt、test_brain_server（/admin 備用）。

---

## 二、部屬步驟

### 1. 推送到 GitHub（若要遠端版控或 Railway）

```powershell
cd c:\Users\user\Desktop\zhe-wei-tech
git remote add origin https://github.com/<你的帳號>/<repo>.git
git branch -M main
git push -u origin main
```

（若已有 remote，改為 `git push origin main`。）

### 2. D 槽部屬（本機熱資料落 D）

**建議**（若 PowerShell 腳本有編碼錯誤時使用）：

```powershell
cd c:\Users\user\Desktop\zhe-wei-tech
python scripts\deploy_to_d_drive.py
```

或：`powershell -ExecutionPolicy Bypass -File scripts\deploy_to_d_drive.ps1`、或雙擊 **一鍵部屬到D槽.bat**。

### 3. Railway 部屬（雲端服務）

**本專案 Railway 服務**：

| 用途 | 網址 |
|------|------|
| **對外（生產）** | https://zhewei-ai-chat-01-production.up.railway.app |
| **Railway 內網** | zhewei-ai-chat-01.railway.internal |

管理介面：https://zhewei-ai-chat-01-production.up.railway.app/admin 或 /static/index.html  
健康檢查：https://zhewei-ai-chat-01-production.up.railway.app/health  

1. 到 [railway.app](https://railway.app) 新建專案，選 **Deploy from GitHub repo**，連到上述 repo。
2. 在專案 **Variables** 設定：`GEMINI_API_KEY`、`ANTHROPIC_API_KEY` 或 `CLAUDE_API_KEY`（勿提交 .env）。
3. 部署完成後使用上表網址。

### 4. 完整跑啟動（讓系統每次都能完整跑八階段）

雙擊 **啟動完整跑.bat** 或執行：

```powershell
cd c:\Users\user\Desktop\zhe-wei-tech
python scripts\run_full_system.py
```

會執行預檢、顯示完整跑條件（GEMINI/Ollama/Claude），再啟動 brain_server。

### 5. 本地驗證與對話頁

- 管理介面（桌面＋手機響應式）：http://localhost:8000/admin 或 http://localhost:8000/static/index.html  
- 手機版對話頁：http://localhost:8000/chat 或 http://localhost:8000/static/chat.html  
- 健康檢查：http://localhost:8000/health  
- 另開終端：`python scripts/test_brain_server.py`。

---

## 三、注意

- `.env` 已列於 .gitignore，勿提交；API key 僅在本地或 Railway Variables 設定。
- 外網（brain.zhe-wei.net）需 Docker Desktop + `.env` 之 `CLOUDFLARE_TOKEN`，再執行 `docker compose up -d`。

---

*寫入及部屬完成後可依本文件執行 push、D 槽、Railway 與本地驗證。*

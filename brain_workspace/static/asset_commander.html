<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Commander - æ”¶å…¥æŒ‡æ®ä¸­å¿ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body{font-family:'Noto Sans TC',sans-serif;margin:0}
        .glass{background:rgba(15,23,42,.65);-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);border:1px solid rgba(148,163,184,.08)}
        .glow-green{box-shadow:0 0 40px rgba(16,185,129,.12);border-color:rgba(16,185,129,.25)}
        .glow-pink{box-shadow:0 0 30px rgba(236,72,153,.1);border-color:rgba(236,72,153,.2)}
        .glow-blue{box-shadow:0 0 30px rgba(59,130,246,.1);border-color:rgba(59,130,246,.2)}
        .glow-amber{box-shadow:0 0 30px rgba(245,158,11,.1);border-color:rgba(245,158,11,.2)}
        .tab-active{background:linear-gradient(135deg,rgba(59,130,246,.15),rgba(139,92,246,.15));border-color:rgba(99,102,241,.4);color:#c7d2fe}
        .tab-btn{transition:all .15s;cursor:pointer;border:1px solid transparent;white-space:nowrap}
        .tab-btn:hover{background:rgba(255,255,255,.04)}
        .bar{height:6px;border-radius:3px;transition:width .6s ease}
        .goal-bar{background:linear-gradient(90deg,#10b981,#06b6d4)}
        .goal-bg{background:rgba(255,255,255,.06);border-radius:3px}
        .product-card{transition:all .2s}
        .product-card:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,0,0,.3)}
        @keyframes pulse-dot{0%,100%{opacity:1}50%{opacity:.4}}
        .pulse-dot{animation:pulse-dot 2s infinite}
        .gradient-text{background:linear-gradient(135deg,#10b981,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    </style>
</head>
<body class="bg-slate-950 min-h-screen text-slate-100">
<div class="max-w-7xl mx-auto px-4 py-5">

    <!-- Header -->
    <header class="flex items-center justify-between mb-5">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-cyan-500 flex items-center justify-center text-lg font-bold">$</div>
            <div>
                <h1 class="text-xl font-bold">Asset Commander</h1>
                <p class="text-[11px] text-slate-500">ä¸‰ç·šä¸¦è¡Œæ”¶å…¥æŒ‡æ®ä¸­å¿ƒ Â· i7-14700 / 64GB / RTX 4060 Ti / 15TB</p>
            </div>
        </div>
        <div class="flex items-center gap-3">
            <span class="text-[10px] text-slate-500" id="last-update">-</span>
            <button onclick="loadAll()" class="text-xs bg-slate-800 hover:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-700 transition"><i class="fas fa-sync-alt mr-1"></i>åˆ·æ–°</button>
        </div>
    </header>

    <!-- æœˆç›®æ¨™é€²åº¦ -->
    <div class="glass glow-green rounded-2xl p-5 mb-5">
        <div class="flex items-center justify-between mb-3">
            <div>
                <span class="text-sm text-slate-400">æœˆæ”¶å…¥ç›®æ¨™</span>
                <span class="text-2xl font-bold gradient-text ml-2">NT$ 10,000</span>
            </div>
            <div class="text-right">
                <div id="goal-pct" class="text-3xl font-bold text-emerald-400">0%</div>
            </div>
        </div>
        <div class="goal-bg overflow-hidden mb-3">
            <div id="goal-bar" class="bar goal-bar" style="width:0%"></div>
        </div>
        <div class="grid grid-cols-3 gap-4 text-center text-xs">
            <div><div class="text-slate-500">æœ¬æœˆç´¯è¨ˆ</div><div id="goal-current" class="font-bold text-white mt-0.5">NT$ 0</div></div>
            <div><div class="text-slate-500">é ä¼°æœˆåº•</div><div id="goal-projected" class="font-bold text-cyan-400 mt-0.5">NT$ 0</div></div>
            <div><div class="text-slate-500">å·®é¡</div><div id="goal-gap" class="font-bold text-amber-400 mt-0.5">NT$ 10,000</div></div>
        </div>
    </div>

    <!-- 6 æ”¶å…¥æºå¡ç‰‡ -->
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-5">
        <div class="glass rounded-xl p-3 product-card glow-pink">
            <div class="flex items-center gap-1.5 mb-1.5"><span class="text-lg">ğŸ¨</span><span class="text-[10px] text-slate-400">AI å‰µä½œ</span></div>
            <div id="rev-creator" class="text-lg font-bold text-pink-400">$0</div>
            <div class="text-[10px] text-slate-500"><span id="rev-creator-subs">0</span> è¨‚é–±</div>
        </div>
        <div class="glass rounded-xl p-3 product-card glow-amber">
            <div class="flex items-center gap-1.5 mb-1.5"><span class="text-lg">ğŸ—ï¸</span><span class="text-[10px] text-slate-400">ç‡Ÿå»º AI</span></div>
            <div id="rev-cms" class="text-lg font-bold text-amber-400">$0</div>
            <div class="text-[10px] text-slate-500"><span id="rev-cms-subs">0</span> è¨‚é–±</div>
        </div>
        <div class="glass rounded-xl p-3 product-card glow-blue">
            <div class="flex items-center gap-1.5 mb-1.5"><span class="text-lg">ğŸ§ </span><span class="text-[10px] text-slate-400">å¤§æ¨¡å‹ API</span></div>
            <div id="rev-api" class="text-lg font-bold text-blue-400">$0</div>
            <div class="text-[10px] text-slate-500"><span id="rev-api-keys">0</span> Key</div>
        </div>
        <div class="glass rounded-xl p-3 product-card">
            <div class="flex items-center gap-1.5 mb-1.5"><span class="text-lg">ğŸ®</span><span class="text-[10px] text-slate-400">GPU å‡ºç§Ÿ</span></div>
            <div id="rev-gpu" class="text-lg font-bold text-emerald-400">$0</div>
            <div class="text-[10px] text-slate-500" id="rev-gpu-platform">-</div>
        </div>
        <div class="glass rounded-xl p-3 product-card">
            <div class="flex items-center gap-1.5 mb-1.5"><span class="text-lg">ğŸŒ</span><span class="text-[10px] text-slate-400">é »å¯¬</span></div>
            <div id="rev-bw" class="text-lg font-bold text-purple-400">~$400</div>
            <div class="text-[10px] text-slate-500">Grass+Honeygain</div>
        </div>
        <div class="glass rounded-xl p-3 product-card">
            <div class="flex items-center gap-1.5 mb-1.5"><span class="text-lg">ğŸ’¾</span><span class="text-[10px] text-slate-400">HDD 15TB</span></div>
            <div id="rev-hdd" class="text-lg font-bold text-teal-400">$0</div>
            <div class="text-[10px] text-slate-500">Storj 10TB</div>
        </div>
    </div>

    <!-- Tab å°èˆª -->
    <div class="flex gap-1.5 mb-4 overflow-x-auto pb-1">
        <button class="tab-btn tab-active rounded-lg px-3 py-1.5 text-xs font-medium" data-tab="overview"><i class="fas fa-chart-pie mr-1"></i>ç¸½è¦½</button>
        <button class="tab-btn rounded-lg px-3 py-1.5 text-xs font-medium text-slate-400" data-tab="products"><i class="fas fa-boxes-stacked mr-1"></i>ä¸‰å¤§ç”¢å“</button>
        <button class="tab-btn rounded-lg px-3 py-1.5 text-xs font-medium text-slate-400" data-tab="api-proxy"><i class="fas fa-key mr-1"></i>API ç®¡ç†</button>
        <button class="tab-btn rounded-lg px-3 py-1.5 text-xs font-medium text-slate-400" data-tab="gpu-rental"><i class="fas fa-microchip mr-1"></i>GPU/è¢«å‹•</button>
        <button class="tab-btn rounded-lg px-3 py-1.5 text-xs font-medium text-slate-400" data-tab="growth"><i class="fas fa-rocket mr-1"></i>æˆé•·ç­–ç•¥</button>
        <button class="tab-btn rounded-lg px-3 py-1.5 text-xs font-medium text-slate-400" data-tab="config"><i class="fas fa-cog mr-1"></i>è¨­å®š</button>
    </div>

    <!-- Tab: ç¸½è¦½ -->
    <div id="tab-overview" class="tab-content">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <div class="glass rounded-xl p-5">
                <h3 class="font-bold text-sm mb-3"><i class="fas fa-chart-bar mr-1 text-emerald-400"></i>æ”¶å…¥çµæ§‹</h3>
                <div id="income-breakdown" class="space-y-2.5"></div>
            </div>
            <div class="glass rounded-xl p-5">
                <h3 class="font-bold text-sm mb-3"><i class="fas fa-server mr-1 text-cyan-400"></i>ç¡¬é«”ç‹€æ…‹</h3>
                <div class="grid grid-cols-2 gap-3 text-sm">
                    <div><div class="text-[10px] text-slate-500 uppercase tracking-wider">CPU</div><div class="font-medium text-xs mt-0.5">i7-14700 20C/28T</div></div>
                    <div><div class="text-[10px] text-slate-500 uppercase tracking-wider">RAM</div><div class="font-medium text-xs mt-0.5">64 GB DDR5</div></div>
                    <div><div class="text-[10px] text-slate-500 uppercase tracking-wider">GPU</div><div id="hw-gpu" class="font-medium text-xs mt-0.5">RTX 4060 Ti 8GB</div></div>
                    <div><div class="text-[10px] text-slate-500 uppercase tracking-wider">å„²å­˜</div><div class="font-medium text-xs mt-0.5">15 TB (SSD 1TB + HDD 14TB)</div></div>
                    <div><div class="text-[10px] text-slate-500 uppercase tracking-wider">GPU åŠŸç‡</div><div id="hw-power" class="font-medium text-xs mt-0.5">160 W</div></div>
                    <div><div class="text-[10px] text-slate-500 uppercase tracking-wider">æ¯æ—¥é›»è²»</div><div id="hw-cost" class="font-medium text-xs mt-0.5 text-red-400">-</div></div>
                    <div><div class="text-[10px] text-slate-500 uppercase tracking-wider">æœ¬åœ°æ¨¡å‹</div><div class="font-medium text-xs mt-0.5">7 å€‹ (qwen3/gemma3/moondream)</div></div>
                    <div><div class="text-[10px] text-slate-500 uppercase tracking-wider">ç”Ÿåœ–å¼•æ“</div><div class="font-medium text-xs mt-0.5">Forge + ComfyUI + 12 é›²ç«¯</div></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab: ä¸‰å¤§ç”¢å“ -->
    <div id="tab-products" class="tab-content hidden">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            <!-- AI å‰µä½œå·¥ä½œå®¤ -->
            <div class="glass rounded-xl overflow-hidden glow-pink">
                <div class="bg-gradient-to-r from-pink-600/20 to-violet-600/20 p-4 border-b border-pink-500/10">
                    <div class="flex items-center gap-2 mb-1"><span class="text-2xl">ğŸ¨</span><h3 class="font-bold">AI å‰µä½œå·¥ä½œå®¤</h3></div>
                    <p class="text-[11px] text-slate-400">ç„¡é™ç”Ÿåœ– Â· åœ–ç‰‡ç”Ÿå½±ç‰‡ Â· æˆäººæ¨¡å¼</p>
                    <a href="/ai-studio" target="_blank" class="inline-block mt-2 text-[10px] text-pink-400 hover:text-pink-300"><i class="fas fa-external-link-alt mr-1"></i>é–‹å•Ÿå·¥ä½œå®¤</a>
                </div>
                <div class="p-4 space-y-3">
                    <div class="text-[10px] text-slate-500 uppercase tracking-wider mb-1">æ–¹æ¡ˆ</div>
                    <div class="space-y-1.5">
                        <div class="flex justify-between text-xs"><span class="text-slate-300">å…è²»é«”é©—</span><span class="text-slate-500">20 åœ–/æœˆ</span><span class="font-medium">$0</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">åŸºç¤ç‰ˆ</span><span class="text-slate-500">200 åœ–/æœˆ</span><span class="font-medium text-pink-400">$299</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">å°ˆæ¥­ç‰ˆ</span><span class="text-slate-500">ç„¡é™+NSFW</span><span class="font-bold text-pink-400">$799</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">ç„¡é™ç‰ˆ</span><span class="text-slate-500">å…¨éƒ¨ç„¡é™</span><span class="font-bold text-pink-400">$1,999</span></div>
                    </div>
                    <div class="text-[10px] text-slate-500 uppercase tracking-wider mt-3 mb-1">åŠŸèƒ½</div>
                    <ul class="text-[11px] text-slate-400 space-y-0.5">
                        <li><i class="fas fa-check text-pink-500 mr-1 text-[9px]"></i>DALLÂ·E 3 / GPT Image / Flux / Imagen 4</li>
                        <li><i class="fas fa-check text-pink-500 mr-1 text-[9px]"></i>Sora 2 åœ–ç‰‡/æ–‡å­—ç”Ÿå½±ç‰‡</li>
                        <li><i class="fas fa-check text-pink-500 mr-1 text-[9px]"></i>æœ¬åœ° Forge NoobAI-XL ç„¡å¯©æŸ¥</li>
                        <li><i class="fas fa-check text-pink-500 mr-1 text-[9px]"></i>ä½œå“åº« + ä¸‹è¼‰</li>
                    </ul>
                    <div class="pt-2 border-t border-slate-800">
                        <div class="text-[10px] text-slate-500">é”æ¨™è·¯å¾‘</div>
                        <div class="text-xs text-pink-400 font-medium">10 Pro + 5 Ultra = <b>$17,985/æœˆ</b></div>
                    </div>
                </div>
            </div>

            <!-- ç‡Ÿå»º AI åŠ©æ‰‹ -->
            <div class="glass rounded-xl overflow-hidden glow-amber">
                <div class="bg-gradient-to-r from-amber-600/20 to-orange-600/20 p-4 border-b border-amber-500/10">
                    <div class="flex items-center gap-2 mb-1"><span class="text-2xl">ğŸ—ï¸</span><h3 class="font-bold">ç‡Ÿå»º AI åŠ©æ‰‹</h3></div>
                    <p class="text-[11px] text-slate-400">14,600+ ç­†çŸ¥è­˜åº« Â· 9 ç¨®è§’è‰² Â· èªéŸ³æ—¥å ±</p>
                    <a href="/cms" target="_blank" class="inline-block mt-2 text-[10px] text-amber-400 hover:text-amber-300"><i class="fas fa-external-link-alt mr-1"></i>é–‹å•Ÿ CMS</a>
                </div>
                <div class="p-4 space-y-3">
                    <div class="text-[10px] text-slate-500 uppercase tracking-wider mb-1">æ–¹æ¡ˆ</div>
                    <div class="space-y-1.5">
                        <div class="flex justify-between text-xs"><span class="text-slate-300">å…è²»é«”é©—</span><span class="text-slate-500">100 ç­† KB</span><span class="font-medium">$0</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">å°ˆæ¥­ç‰ˆ</span><span class="text-slate-500">50K KB+èªéŸ³</span><span class="font-bold text-amber-400">$1,500</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">ä¼æ¥­ç‰ˆ</span><span class="text-slate-500">ç„¡é™+å…¨è§’è‰²</span><span class="font-bold text-amber-400">$8,000</span></div>
                    </div>
                    <div class="text-[10px] text-slate-500 uppercase tracking-wider mt-3 mb-1">è­·åŸæ²³</div>
                    <ul class="text-[11px] text-slate-400 space-y-0.5">
                        <li><i class="fas fa-shield-halved text-amber-500 mr-1 text-[9px]"></i>14,600+ ç­†å°ç£ç‡Ÿå»ºæ³•è¦</li>
                        <li><i class="fas fa-shield-halved text-amber-500 mr-1 text-[9px]"></i>9 ç¨®å°ˆæ¥­è§’è‰²çŸ¥è­˜åº«</li>
                        <li><i class="fas fa-shield-halved text-amber-500 mr-1 text-[9px]"></i>Whisper èªéŸ³è¾¨è­˜è‡ªå‹•å¡«å ±</li>
                        <li><i class="fas fa-shield-halved text-amber-500 mr-1 text-[9px]"></i>AI è¦–è¦ºå®‰å…¨åµæ¸¬</li>
                        <li><i class="fas fa-shield-halved text-amber-500 mr-1 text-[9px]"></i>å°ç£å¸‚å ´å¹¾ä¹é›¶ç«¶çˆ­</li>
                    </ul>
                    <div class="pt-2 border-t border-slate-800">
                        <div class="text-[10px] text-slate-500">é”æ¨™è·¯å¾‘</div>
                        <div class="text-xs text-amber-400 font-medium">2 Pro + 1 Enterprise = <b>$11,000/æœˆ</b></div>
                    </div>
                </div>
            </div>

            <!-- å¤§æ¨¡å‹ API -->
            <div class="glass rounded-xl overflow-hidden glow-blue">
                <div class="bg-gradient-to-r from-blue-600/20 to-indigo-600/20 p-4 border-b border-blue-500/10">
                    <div class="flex items-center gap-2 mb-1"><span class="text-2xl">ğŸ§ </span><h3 class="font-bold">å¤§æ¨¡å‹ API</h3></div>
                    <p class="text-[11px] text-slate-400">OpenAI ç›¸å®¹ Â· 64GB è·‘ 70B Â· ä¾¿å®œ 80%</p>
                    <a href="/v1/models" target="_blank" class="inline-block mt-2 text-[10px] text-blue-400 hover:text-blue-300"><i class="fas fa-external-link-alt mr-1"></i>æ¨¡å‹åˆ—è¡¨</a>
                </div>
                <div class="p-4 space-y-3">
                    <div class="text-[10px] text-slate-500 uppercase tracking-wider mb-1">æ–¹æ¡ˆ</div>
                    <div class="space-y-1.5">
                        <div class="flex justify-between text-xs"><span class="text-slate-300">å…è²»</span><span class="text-slate-500">50K tok</span><span class="font-medium">$0</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">å…¥é–€</span><span class="text-slate-500">500K tok</span><span class="font-medium text-blue-400">$299</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">å°ˆæ¥­</span><span class="text-slate-500">5M tok</span><span class="font-bold text-blue-400">$999</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">å•†å‹™</span><span class="text-slate-500">50M tok</span><span class="font-bold text-blue-400">$4,999</span></div>
                        <div class="flex justify-between text-xs"><span class="text-slate-300">ç„¡é™</span><span class="text-slate-500">ç„¡é™</span><span class="font-bold text-blue-400">$9,999</span></div>
                    </div>
                    <div class="text-[10px] text-slate-500 uppercase tracking-wider mt-3 mb-1">å„ªå‹¢</div>
                    <ul class="text-[11px] text-slate-400 space-y-0.5">
                        <li><i class="fas fa-bolt text-blue-500 mr-1 text-[9px]"></i>64GB RAM è·‘ 70B æ¨¡å‹</li>
                        <li><i class="fas fa-bolt text-blue-500 mr-1 text-[9px]"></i>Qwen3 8B/4B + Gemma3 4B</li>
                        <li><i class="fas fa-bolt text-blue-500 mr-1 text-[9px]"></i>æ¯” GPT-4 ä¾¿å®œ 80%</li>
                        <li><i class="fas fa-bolt text-blue-500 mr-1 text-[9px]"></i>Embedding 768 ç¶­</li>
                    </ul>
                    <div class="pt-2 border-t border-slate-800">
                        <div class="text-[10px] text-slate-500">é”æ¨™è·¯å¾‘</div>
                        <div class="text-xs text-blue-400 font-medium">3 Pro + 1 Business = <b>$7,996/æœˆ</b></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab: API ç®¡ç† -->
    <div id="tab-api-proxy" class="tab-content hidden">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-3 mb-4">
            <div class="glass rounded-xl p-4">
                <div class="text-[10px] text-slate-500 uppercase">æœ¬æœˆ API æ”¶å…¥</div>
                <div id="api-month-rev" class="text-xl font-bold text-emerald-400 mt-1">NT$ 0</div>
            </div>
            <div class="glass rounded-xl p-4">
                <div class="text-[10px] text-slate-500 uppercase">è¨‚é–±æ”¶å…¥</div>
                <div id="api-sub-rev" class="text-xl font-bold text-blue-400 mt-1">NT$ 0</div>
            </div>
            <div class="glass rounded-xl p-4">
                <div class="text-[10px] text-slate-500 uppercase">æ´»èºç”¨æˆ¶</div>
                <div id="api-active" class="text-xl font-bold text-violet-400 mt-1">0</div>
            </div>
        </div>
        <div class="glass rounded-xl p-5 mb-4">
            <h3 class="font-bold text-sm mb-3"><i class="fas fa-key mr-1 text-amber-400"></i>API Key ç®¡ç†</h3>
            <div class="flex flex-wrap gap-2 mb-3">
                <input id="new-key-owner" placeholder="æ“æœ‰è€…åç¨±" class="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-xs flex-1 min-w-[120px] focus:outline-none focus:border-blue-500/50">
                <input id="new-key-email" placeholder="Email" class="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-xs flex-1 min-w-[120px] focus:outline-none focus:border-blue-500/50">
                <select id="new-key-plan" aria-label="é¸æ“‡æ–¹æ¡ˆ" class="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-xs">
                    <option value="free">å…è²»</option>
                    <option value="starter">å…¥é–€ $299</option>
                    <option value="pro">å°ˆæ¥­ $999</option>
                    <option value="business">å•†å‹™ $4999</option>
                    <option value="unlimited">ç„¡é™ $9999</option>
                </select>
                <button onclick="generateKey()" class="bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-xs font-medium transition"><i class="fas fa-plus mr-1"></i>ç”Ÿæˆ</button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-xs">
                    <thead><tr class="text-slate-500 border-b border-slate-800">
                        <th class="text-left py-2">Key</th><th class="text-left py-2">æ“æœ‰è€…</th>
                        <th class="text-left py-2">æ–¹æ¡ˆ</th><th class="text-right py-2">æ“ä½œ</th>
                    </tr></thead>
                    <tbody id="keys-tbody"></tbody>
                </table>
            </div>
        </div>
        <div class="glass rounded-xl p-5">
            <h3 class="font-bold text-sm mb-3"><i class="fas fa-tags mr-1 text-cyan-400"></i>æ¨¡å‹å®šåƒ¹</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-xs">
                    <thead><tr class="text-slate-500 border-b border-slate-800">
                        <th class="text-left py-2">æ¨¡å‹</th>
                        <th class="text-right py-2">è¼¸å…¥ (NT$/1K)</th>
                        <th class="text-right py-2">è¼¸å‡º (NT$/1K)</th>
                    </tr></thead>
                    <tbody id="pricing-tbody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Tab: GPU/è¢«å‹• -->
    <div id="tab-gpu-rental" class="tab-content hidden">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
            <div class="glass rounded-xl p-5">
                <h3 class="font-bold text-sm mb-3"><i class="fas fa-microchip mr-1 text-emerald-400"></i>GPU å¹³è‡º</h3>
                <table class="w-full text-xs">
                    <thead><tr class="text-slate-500 border-b border-slate-800">
                        <th class="text-left py-2">å¹³è‡º</th><th class="text-left py-2">ç‹€æ…‹</th>
                        <th class="text-right py-2">æ™‚æ·¨åˆ©</th>
                    </tr></thead>
                    <tbody id="gpu-platform-table"></tbody>
                </table>
                <div id="gpu-best" class="mt-3 text-center text-xs"></div>
                <div class="flex gap-2 mt-3">
                    <button onclick="toggleSystem()" id="toggle-btn" class="bg-emerald-600 hover:bg-emerald-500 px-4 py-1.5 rounded-lg text-xs font-medium transition flex-1">â–¶ï¸ å•Ÿå‹•</button>
                    <button onclick="refreshAsset()" class="bg-slate-700 hover:bg-slate-600 px-4 py-1.5 rounded-lg text-xs transition">ğŸ”„</button>
                    <button onclick="switchBest()" class="bg-violet-600 hover:bg-violet-500 px-4 py-1.5 rounded-lg text-xs transition">ğŸ”€ æœ€ä½³</button>
                </div>
            </div>
            <div class="glass rounded-xl p-5">
                <h3 class="font-bold text-sm mb-3"><i class="fas fa-coins mr-1 text-amber-400"></i>è¢«å‹•æ”¶å…¥</h3>
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-2.5 bg-slate-900/50 rounded-lg">
                        <div class="flex items-center gap-2"><span>ğŸ®</span><div><div class="text-xs font-medium">GPU ç®—åŠ›å‡ºç§Ÿ</div><div class="text-[10px] text-slate-500">IO.net / Salad / Nosana</div></div></div>
                        <div class="text-right"><div class="text-xs font-bold text-emerald-400">~$1,500/æœˆ</div></div>
                    </div>
                    <div class="flex items-center justify-between p-2.5 bg-slate-900/50 rounded-lg">
                        <div class="flex items-center gap-2"><span>ğŸŒ</span><div><div class="text-xs font-medium">é »å¯¬å‡ºç§Ÿ</div><div class="text-[10px] text-slate-500">Grass.io + Honeygain</div></div></div>
                        <div class="text-right"><div class="text-xs font-bold text-purple-400">~$400/æœˆ</div></div>
                    </div>
                    <div class="flex items-center justify-between p-2.5 bg-slate-900/50 rounded-lg">
                        <div class="flex items-center gap-2"><span>ğŸ’¾</span><div><div class="text-xs font-medium">HDD å„²å­˜å‡ºç§Ÿ</div><div class="text-[10px] text-slate-500">Storj 10TB Â· $1.5/TB/æœˆ</div></div></div>
                        <div class="text-right"><div class="text-xs font-bold text-teal-400">~$750/æœˆ</div></div>
                    </div>
                    <div class="border-t border-slate-800 pt-2 flex justify-between">
                        <span class="text-xs text-slate-400">è¢«å‹•æ”¶å…¥å°è¨ˆ</span>
                        <span class="text-sm font-bold text-emerald-400">~$2,650/æœˆ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab: æˆé•·ç­–ç•¥ -->
    <div id="tab-growth" class="tab-content hidden">
        <div class="glass rounded-xl p-5 mb-4">
            <h3 class="font-bold text-sm mb-3"><i class="fas fa-bullseye mr-1 text-red-400"></i>æœ€å¿«é”æ¨™è·¯å¾‘</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-xs">
                    <thead><tr class="text-slate-500 border-b border-slate-800">
                        <th class="text-left py-2">æ”¶å…¥æº</th><th class="text-left py-2">ç›®æ¨™</th><th class="text-right py-2">æœˆæ”¶å…¥</th>
                    </tr></thead>
                    <tbody>
                        <tr class="border-b border-slate-800/50"><td class="py-2">ğŸ¨ AI å‰µä½œ</td><td class="py-2 text-slate-400">5 Pro + 2 Ultra</td><td class="py-2 text-right font-bold text-pink-400">$7,993</td></tr>
                        <tr class="border-b border-slate-800/50"><td class="py-2">ğŸ—ï¸ ç‡Ÿå»º AI</td><td class="py-2 text-slate-400">2 Pro + 1 Enterprise</td><td class="py-2 text-right font-bold text-amber-400">$11,000</td></tr>
                        <tr class="border-b border-slate-800/50"><td class="py-2">ğŸ§  å¤§æ¨¡å‹ API</td><td class="py-2 text-slate-400">3 Pro + 1 Business</td><td class="py-2 text-right font-bold text-blue-400">$7,996</td></tr>
                        <tr class="border-b border-slate-800/50"><td class="py-2">ğŸ®ğŸŒğŸ’¾ è¢«å‹•</td><td class="py-2 text-slate-400">GPU+é »å¯¬+HDD</td><td class="py-2 text-right font-bold text-emerald-400">$2,650</td></tr>
                        <tr class="bg-emerald-950/20"><td class="py-2 font-bold" colspan="2">ä»»ä¸€ç”¢å“ç·š + è¢«å‹•æ”¶å…¥å³å¯é”æ¨™</td><td class="py-2 text-right font-bold text-lg text-emerald-400">$10,000+</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="glass rounded-xl p-5">
            <h3 class="font-bold text-sm mb-3"><i class="fas fa-lightbulb mr-1 text-yellow-400"></i>è¡Œå‹•å»ºè­°</h3>
            <div id="suggestions" class="space-y-2"></div>
        </div>
    </div>

    <!-- Tab: è¨­å®š -->
    <div id="tab-config" class="tab-content hidden">
        <div class="glass rounded-xl p-5 mb-4">
            <h3 class="font-bold text-sm mb-3"><i class="fas fa-bolt mr-1 text-yellow-400"></i>é›»è²»èˆ‡é–€æª»</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-[10px] text-slate-500 mb-1 uppercase" for="cfg-elec">é›»è²» (NT$/kWh)</label>
                    <input type="number" id="cfg-elec" class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-xs focus:outline-none focus:border-blue-500/50" step="0.1" value="4.0">
                </div>
                <div>
                    <label class="block text-[10px] text-slate-500 mb-1 uppercase" for="cfg-threshold">æœ€ä½æ·¨åˆ©é–€æª» (NT$/å¤©)</label>
                    <input type="number" id="cfg-threshold" class="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-xs focus:outline-none focus:border-blue-500/50" step="0.1" value="0.5">
                </div>
            </div>
            <button onclick="saveConfig()" class="mt-3 bg-blue-600 hover:bg-blue-500 px-5 py-2 rounded-lg text-xs font-medium transition"><i class="fas fa-save mr-1"></i>å„²å­˜</button>
        </div>
        <div class="glass rounded-xl p-5">
            <h3 class="font-bold text-sm mb-3"><i class="fas fa-link mr-1 text-cyan-400"></i>æœå‹™é€£çµ</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs">
                <a href="/ai-studio" target="_blank" class="p-2.5 bg-slate-900/50 rounded-lg hover:bg-slate-800 transition flex items-center gap-2"><span>ğŸ¨</span>AI å‰µä½œå·¥ä½œå®¤<i class="fas fa-external-link-alt ml-auto text-slate-600"></i></a>
                <a href="/cms" target="_blank" class="p-2.5 bg-slate-900/50 rounded-lg hover:bg-slate-800 transition flex items-center gap-2"><span>ğŸ—ï¸</span>ç‡Ÿå»ºç®¡ç†ç³»çµ±<i class="fas fa-external-link-alt ml-auto text-slate-600"></i></a>
                <a href="/v1/models" target="_blank" class="p-2.5 bg-slate-900/50 rounded-lg hover:bg-slate-800 transition flex items-center gap-2"><span>ğŸ§ </span>å¤§æ¨¡å‹ API<i class="fas fa-external-link-alt ml-auto text-slate-600"></i></a>
                <a href="/payment" target="_blank" class="p-2.5 bg-slate-900/50 rounded-lg hover:bg-slate-800 transition flex items-center gap-2"><span>ğŸ’³</span>ä»˜æ¬¾é é¢<i class="fas fa-external-link-alt ml-auto text-slate-600"></i></a>
                <a href="/admin-commercial" target="_blank" class="p-2.5 bg-slate-900/50 rounded-lg hover:bg-slate-800 transition flex items-center gap-2"><span>ğŸ“Š</span>å•†ç”¨ç®¡ç†å¾Œå°<i class="fas fa-external-link-alt ml-auto text-slate-600"></i></a>
                <a href="/jarvis" target="_blank" class="p-2.5 bg-slate-900/50 rounded-lg hover:bg-slate-800 transition flex items-center gap-2"><span>ğŸ¤–</span>Jarvis ä¸»ç³»çµ±<i class="fas fa-external-link-alt ml-auto text-slate-600"></i></a>
            </div>
        </div>
    </div>

</div>

<script>
const TOKEN = localStorage.getItem('jarvis_token') || '';
const HDR = { 'Content-Type': 'application/json' };
if (TOKEN) HDR['Authorization'] = `Bearer ${TOKEN}`;

let assetState = null, apiRevenue = null, apiKeys = [], models = [], revSummary = null;

async function api(url, opts = {}) {
    try {
        const r = await fetch(url, { ...opts, headers: { ...HDR, ...opts.headers } });
        return await r.json();
    } catch (e) { return { ok: false, error: e.message }; }
}

// Tab switching
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => { b.classList.remove('tab-active'); b.classList.add('text-slate-400'); });
        btn.classList.add('tab-active'); btn.classList.remove('text-slate-400');
        document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
        document.getElementById('tab-' + btn.dataset.tab).classList.remove('hidden');
    });
});

async function loadAll() {
    const [stateR, revR, keysR, modelsR, summaryR] = await Promise.all([
        api('/api/asset/state'),
        api('/api/proxy/revenue'),
        api('/api/proxy/keys'),
        api('/v1/models'),
        api('/api/revenue/summary'),
    ]);
    assetState = stateR.ok !== false ? stateR : null;
    apiRevenue = revR.ok !== false ? revR : null;
    apiKeys = keysR.ok !== false ? (keysR.keys || []) : [];
    models = modelsR.ok !== false ? (modelsR.models || []) : [];
    revSummary = summaryR.ok ? summaryR : null;
    render();
    document.getElementById('last-update').textContent = new Date().toLocaleTimeString();
}

function render() {
    renderGoal();
    renderCards();
    renderOverview();
    renderApiProxy();
    renderGpu();
    renderSuggestions();
}

function renderGoal() {
    const apiMonth = apiRevenue ? (apiRevenue.month_total_revenue || 0) : 0;
    const creatorMonth = revSummary ? (revSummary.by_product?.ai_creator?.revenue || 0) : 0;
    const cmsMonth = revSummary ? (revSummary.by_product?.construction_ai?.revenue || 0) : 0;
    const passiveMonth = 2650;
    const total = apiMonth + creatorMonth + cmsMonth + passiveMonth;
    const goal = 10000;
    const pct = Math.min((total / goal) * 100, 100);
    const dayOfMonth = new Date().getDate();
    const daysInMonth = new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate();
    const projected = dayOfMonth > 0 ? (total / dayOfMonth) * daysInMonth : 0;
    document.getElementById('goal-pct').textContent = pct.toFixed(1) + '%';
    document.getElementById('goal-bar').style.width = pct + '%';
    document.getElementById('goal-current').textContent = 'NT$ ' + total.toLocaleString();
    document.getElementById('goal-projected').textContent = 'NT$ ' + Math.round(projected).toLocaleString();
    document.getElementById('goal-gap').textContent = 'NT$ ' + Math.max(goal - total, 0).toLocaleString();
}

function renderCards() {
    const ar = apiRevenue || {};
    const rs = revSummary?.by_product || {};
    document.getElementById('rev-creator').textContent = '$' + (rs.ai_creator?.revenue || 0).toLocaleString();
    document.getElementById('rev-creator-subs').textContent = rs.ai_creator?.active_subs || 0;
    document.getElementById('rev-cms').textContent = '$' + (rs.construction_ai?.revenue || 0).toLocaleString();
    document.getElementById('rev-cms-subs').textContent = rs.construction_ai?.active_subs || 0;
    document.getElementById('rev-api').textContent = '$' + (ar.month_total_revenue || 0).toLocaleString();
    document.getElementById('rev-api-keys').textContent = ar.active_keys || 0;
    if (assetState) {
        const gpuProfit = Math.max((assetState.net_profit_day || 0) * 30, 0);
        document.getElementById('rev-gpu').textContent = '$' + Math.round(gpuProfit).toLocaleString();
        document.getElementById('rev-gpu-platform').textContent = (assetState.current_platform || '-').toUpperCase();
    }
}

function renderOverview() {
    const breakdown = document.getElementById('income-breakdown');
    const ar = apiRevenue || {};
    const rs = revSummary?.by_product || {};
    const sources = [
        { name: 'ğŸ¨ AI å‰µä½œ', amount: rs.ai_creator?.revenue || 0, color: 'bg-pink-500' },
        { name: 'ğŸ—ï¸ ç‡Ÿå»º AI', amount: rs.construction_ai?.revenue || 0, color: 'bg-amber-500' },
        { name: 'ğŸ§  å¤§æ¨¡å‹ API', amount: ar.month_total_revenue || 0, color: 'bg-blue-500' },
        { name: 'ğŸ® GPU å‡ºç§Ÿ', amount: assetState ? Math.max((assetState.net_profit_day || 0) * 30, 0) : 1500, color: 'bg-emerald-500' },
        { name: 'ğŸŒ é »å¯¬', amount: 400, color: 'bg-purple-500' },
        { name: 'ğŸ’¾ HDD', amount: 750, color: 'bg-teal-500' },
    ];
    const total = sources.reduce((s, x) => s + x.amount, 0) || 1;
    breakdown.innerHTML = sources.map(s => {
        const pct = ((s.amount / total) * 100).toFixed(1);
        return `<div>
            <div class="flex justify-between text-xs mb-1"><span class="text-slate-300">${s.name}</span><span class="font-medium">$${s.amount.toLocaleString()} <span class="text-slate-500">(${pct}%)</span></span></div>
            <div class="goal-bg overflow-hidden"><div class="bar ${s.color}" style="width:${pct}%"></div></div>
        </div>`;
    }).join('');
    if (assetState) {
        document.getElementById('hw-power').textContent = (assetState.gpu_power_watts || 160) + ' W';
        document.getElementById('hw-cost').textContent = 'NT$ ' + (assetState.total_cost_day || 15.36).toFixed(2);
    } else {
        document.getElementById('hw-cost').textContent = 'NT$ ~15.36';
    }
}

function renderApiProxy() {
    const ar = apiRevenue || {};
    document.getElementById('api-month-rev').textContent = 'NT$ ' + (ar.month_api_revenue || 0).toFixed(2);
    document.getElementById('api-sub-rev').textContent = 'NT$ ' + (ar.month_subscription_revenue || 0).toLocaleString();
    document.getElementById('api-active').textContent = ar.active_keys || 0;
    const tbody = document.getElementById('keys-tbody');
    tbody.innerHTML = apiKeys.map(k => `<tr class="border-b border-slate-800/50">
        <td class="py-1.5 font-mono text-slate-400">${k.key_prefix}...</td>
        <td class="py-1.5">${k.owner}</td>
        <td class="py-1.5"><span class="px-1.5 py-0.5 rounded text-[10px] bg-slate-800">${k.plan}</span></td>
        <td class="py-1.5 text-right"><button onclick="revokeKey('${k.id}')" class="text-red-400 hover:text-red-300 text-[10px]"><i class="fas fa-trash"></i></button></td>
    </tr>`).join('') || '<tr><td colspan="4" class="py-4 text-center text-slate-600 text-xs">å°šç„¡ API Key</td></tr>';
    const ptbody = document.getElementById('pricing-tbody');
    ptbody.innerHTML = models.map(m => `<tr class="border-b border-slate-800/50">
        <td class="py-1.5 font-mono text-slate-300">${m.model}</td>
        <td class="py-1.5 text-right text-slate-400">$${m.input_price_per_1k}</td>
        <td class="py-1.5 text-right text-slate-400">$${m.output_price_per_1k}</td>
    </tr>`).join('');
}

function renderGpu() {
    if (!assetState) return;
    const tbody = document.getElementById('gpu-platform-table');
    const platforms = assetState.platforms || {};
    tbody.innerHTML = Object.entries(platforms).map(([name, p]) => {
        const cls = p.profit > 0 ? 'text-emerald-400' : (p.profit < 0 ? 'text-red-400' : '');
        const dot = p.status === 'online' ? 'text-emerald-400' : 'text-slate-600';
        return `<tr class="border-b border-slate-800/50">
            <td class="py-2 font-medium">${name.toUpperCase()}</td>
            <td class="py-2"><i class="fas fa-circle text-[6px] ${dot} mr-1"></i>${p.status}</td>
            <td class="py-2 text-right ${cls}">$${(p.profit || 0).toFixed(4)}</td>
        </tr>`;
    }).join('');
    const best = assetState.best_platform;
    document.getElementById('gpu-best').innerHTML = best ? `<i class="fas fa-trophy text-amber-400 mr-1"></i>æœ€ä½³: <span class="text-amber-400 font-bold">${best.toUpperCase()}</span>` : '';
    const btn = document.getElementById('toggle-btn');
    btn.innerHTML = assetState.running ? 'â¹ï¸ åœæ­¢' : 'â–¶ï¸ å•Ÿå‹•';
    btn.className = (assetState.running ? 'bg-red-600 hover:bg-red-500' : 'bg-emerald-600 hover:bg-emerald-500') + ' px-4 py-1.5 rounded-lg text-xs font-medium transition flex-1';
}

function renderSuggestions() {
    const sug = document.getElementById('suggestions');
    const tips = [];
    const rs = revSummary?.by_product || {};
    if ((rs.ai_creator?.active_subs || 0) < 5) tips.push({icon:'ğŸ¨',color:'pink',title:'æ¨å»£ AI å‰µä½œå·¥ä½œå®¤',desc:'æˆäººå…§å®¹ç”Ÿæˆæ˜¯å‰›éœ€å¸‚å ´ã€‚åœ¨ Twitter/Reddit/Pixiv ç™¼å¸ƒä½œå“ + å…è²»è©¦ç”¨é€£çµã€‚',pot:'10 Pro = $7,990/æœˆ'});
    if ((rs.construction_ai?.active_subs || 0) < 3) tips.push({icon:'ğŸ—ï¸',color:'amber',title:'é–‹ç™¼ç‡Ÿå»ºå®¢æˆ¶',desc:'å°ç£ç‡Ÿå»º AI å¸‚å ´å¹¾ä¹ç©ºç™½ï¼Œä½ çš„ 14,600 ç­†çŸ¥è­˜åº«æ˜¯è­·åŸæ²³ã€‚è¯ç¹«ç‡Ÿå»ºå…¬å¸æä¾›å…è²»è©¦ç”¨ã€‚',pot:'2 Pro + 1 Enterprise = $11,000/æœˆ'});
    if ((apiRevenue?.active_keys || 0) < 3) tips.push({icon:'ğŸ§ ',color:'blue',title:'æ¨å»£å¤§æ¨¡å‹ API',desc:'64GB RAM å¯è·‘ 70B æ¨¡å‹ã€‚åœ¨ PTT/Dcard æŠ€è¡“ç‰ˆç™¼æ–‡ï¼Œå¼·èª¿æ¯” OpenAI ä¾¿å®œ 80%ã€‚',pot:'3 Pro + 1 Business = $7,996/æœˆ'});
    tips.push({icon:'ğŸš€',color:'violet',title:'ä¸‹è¼‰ 70B æ¨¡å‹',desc:'ollama pull qwen3:70bï¼ˆ~40GBï¼‰ã€‚64GB RAM CPU offload å¯è·‘ 4-6 tok/sï¼Œå¤§éƒ¨åˆ†ç«¶çˆ­è€…è·‘ä¸äº†ã€‚',pot:'å·®ç•°åŒ–å®šåƒ¹ï¼Œ70B API æ”¶æ›´é«˜è²»ç”¨'});
    tips.push({icon:'ğŸ’°',color:'emerald',title:'å•Ÿå‹•å…¨éƒ¨è¢«å‹•æ”¶å…¥',desc:'å®‰è£ Grass.io + Honeygain + è¨­å®š Storj 10TB ç¯€é» + è¨»å†Š IO.net/Salad GPU å‡ºç§Ÿã€‚',pot:'$2,650/æœˆ é›¶é¡å¤–äººåŠ›'});
    sug.innerHTML = tips.map(t => `<div class="p-3 bg-${t.color}-950/20 rounded-lg border border-${t.color}-900/20">
        <div class="flex items-center gap-2 mb-1"><span>${t.icon}</span><span class="font-bold text-xs text-${t.color}-400">${t.title}</span><span class="ml-auto text-[10px] text-${t.color}-400/60">${t.pot}</span></div>
        <div class="text-[11px] text-slate-400">${t.desc}</div>
    </div>`).join('');
}

async function generateKey() {
    const owner = document.getElementById('new-key-owner').value.trim();
    const email = document.getElementById('new-key-email').value.trim();
    const plan = document.getElementById('new-key-plan').value;
    if (!owner) return alert('è«‹è¼¸å…¥æ“æœ‰è€…åç¨±');
    const r = await api('/api/proxy/keys/generate', { method: 'POST', body: JSON.stringify({ owner, email, plan }) });
    if (r.ok) { alert('API Key å·²ç”Ÿæˆ:\n\n' + r.api_key + '\n\nè«‹å¦¥å–„ä¿ç®¡ï¼'); loadAll(); }
    else alert('å¤±æ•—: ' + (r.error || r.detail || 'æœªçŸ¥éŒ¯èª¤'));
}
async function revokeKey(keyId) {
    if (!confirm('ç¢ºå®šæ’¤éŠ·æ­¤ Keyï¼Ÿ')) return;
    const r = await api('/api/proxy/keys/revoke', { method: 'POST', body: JSON.stringify({ key_id: keyId }) });
    if (r.ok) loadAll(); else alert('å¤±æ•—: ' + (r.error || ''));
}
async function toggleSystem() {
    const endpoint = assetState?.running ? '/api/asset/stop' : '/api/asset/start';
    await api(endpoint, { method: 'POST' }); loadAll();
}
async function refreshAsset() { await api('/api/asset/refresh', { method: 'POST' }); loadAll(); }
async function switchBest() {
    if (!assetState?.best_platform || assetState.best_platform === 'none') return;
    await api('/api/asset/switch', { method: 'POST', body: JSON.stringify({ platform: assetState.best_platform }) }); loadAll();
}
async function saveConfig() {
    const r = await api('/api/asset/config', { method: 'POST', body: JSON.stringify({
        electricity_rate: parseFloat(document.getElementById('cfg-elec').value),
        min_profit_threshold: parseFloat(document.getElementById('cfg-threshold').value)
    })});
    alert(r.ok ? 'å·²å„²å­˜' : 'å¤±æ•—');
}

loadAll();
setInterval(loadAll, 60000);
</script>
</body>
</html>

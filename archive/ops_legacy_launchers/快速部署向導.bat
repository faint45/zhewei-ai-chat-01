@echo off
chcp 65001 >nul
title ç¯‰æœªç§‘æŠ€ç³»çµ± - å¿«é€Ÿéƒ¨ç½²å‘å°Ž

:MENU
cls
echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘          ç¯‰æœªç§‘æŠ€ç³»çµ± - ç¶²çµ¡éƒ¨ç½²å‘å°Ž                       â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo è«‹é¸æ“‡éƒ¨ç½²æ–¹æ¡ˆï¼š
echo.
echo   [1] Ngrok å…§ç¶²ç©¿é€ï¼ˆæœ€ç°¡å–®ï¼Œ5åˆ†é˜å®Œæˆï¼‰
echo       é©åˆï¼šå€‹äººä½¿ç”¨ã€æ¸¬è©¦ã€æ¼”ç¤º
echo       å„ªé»žï¼šç„¡éœ€é…ç½®è·¯ç”±å™¨ï¼Œå³ç”¨å³é€£
echo       ç¼ºé»žï¼šURL æœƒè®ŠåŒ–ï¼Œéœ€è¦ä¿æŒé‹è¡Œ
echo.
echo   [2] è·¯ç”±å™¨ç«¯å£è½‰ç™¼ï¼ˆç©©å®šï¼ŒæŽ¨è–¦ï¼‰
echo       é©åˆï¼šå®¶åº­ç¶²çµ¡ã€å°åœ˜éšŠ
echo       å„ªé»žï¼šç©©å®šã€ç„¡é¡å¤–ä¾è³´
echo       ç¼ºé»žï¼šéœ€è¦è·¯ç”±å™¨ç®¡ç†æ¬Šé™
echo.
echo   [3] DDNS è‡ªå‹•é…ç½®ï¼ˆæœ€ä½³ï¼‰
echo       é©åˆï¼šé•·æœŸä½¿ç”¨ã€å›ºå®šåŸŸå
echo       å„ªé»žï¼šå›ºå®šåŸŸåã€è‡ªå‹•æ›´æ–°ã€ç©©å®šå¯é 
echo       ç¼ºé»žï¼šéœ€è¦ DuckDNS å¸³è™Ÿå’Œè·¯ç”±å™¨é…ç½®
echo.
echo   [4] æŸ¥çœ‹ç¶²çµ¡é…ç½®ä¿¡æ¯
echo       é¡¯ç¤ºæœ¬æ©Ÿ IPã€å…¬ç¶² IPã€ç«¯å£ç‹€æ…‹
echo.
echo   [5] æŸ¥çœ‹å®Œæ•´éƒ¨ç½²æŒ‡å—
echo       æ‰“é–‹è©³ç´°çš„ç¶²çµ¡éƒ¨ç½²æ–‡æª”
echo.
echo   [0] é€€å‡º
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

set /p choice="è«‹è¼¸å…¥é¸é … [0-5]: "

if "%choice%"=="1" goto NGROK
if "%choice%"=="2" goto PORT_FORWARD
if "%choice%"=="3" goto DDNS
if "%choice%"=="4" goto NETWORK_INFO
if "%choice%"=="5" goto GUIDE
if "%choice%"=="0" goto END

echo.
echo âŒ ç„¡æ•ˆé¸é …ï¼Œè«‹é‡æ–°é¸æ“‡
timeout /t 2 >nul
goto MENU

:NGROK
cls
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æ–¹æ¡ˆ 1ï¼šNgrok å…§ç¶²ç©¿é€
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ’¡ å‰ç½®æ¢ä»¶ï¼š
echo   1. å·²å®‰è£ Ngrokï¼ˆhttps://ngrok.com/ï¼‰
echo   2. å·²é‹è¡Œæœ¬åœ°æœå‹™ï¼ˆstart_all_services.batï¼‰
echo   3. å·²é…ç½® Ngrok authtoken
echo.
echo ðŸ“‹ éƒ¨ç½²æ­¥é©Ÿï¼š
echo   1. ç³»çµ±å°‡è‡ªå‹•å•Ÿå‹• Ngrok ç©¿é€
echo   2. æŸ¥çœ‹ Ngrok çª—å£ä¸­çš„ "Forwarding" URL
echo   3. ä½¿ç”¨ URL è¨ªå•æ‚¨çš„æœå‹™
echo.
echo âš ï¸  é‡è¦æç¤ºï¼š
echo   - Ngrok URL æ¯æ¬¡å•Ÿå‹•æœƒè®ŠåŒ–
echo   - éœ€è¦ä¿æŒ Ngrok çª—å£é‹è¡Œ
echo   - å…è²»ç‰ˆæœ‰é€£æŽ¥é™åˆ¶
echo.
set /p confirm="ç¢ºèªå•Ÿå‹• Ngrok éƒ¨ç½²ï¼Ÿ(Y/N): "
if /i not "%confirm%"=="Y" goto MENU

call deploy_ngrok.bat
goto MENU

:PORT_FORWARD
cls
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æ–¹æ¡ˆ 2ï¼šè·¯ç”±å™¨ç«¯å£è½‰ç™¼
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ’¡ å‰ç½®æ¢ä»¶ï¼š
echo   1. æœ¬åœ°æœå‹™å·²é‹è¡Œï¼ˆstart_all_services.batï¼‰
echo   2. æœ‰è·¯ç”±å™¨ç®¡ç†æ¬Šé™
echo   3. äº†è§£è·¯ç”±å™¨ç™»éŒ„ä¿¡æ¯
echo.
echo ðŸ“‹ éƒ¨ç½²æ­¥é©Ÿï¼š
echo   1. ç²å–ç¶²çµ¡é…ç½®ä¿¡æ¯ï¼ˆæœ¬æ©Ÿ IPã€å…¬ç¶² IPï¼‰
echo   2. é€²å…¥è·¯ç”±å™¨ç®¡ç†é é¢
echo   3. é…ç½®ç«¯å£è½‰ç™¼è¦å‰‡
echo   4. ä½¿ç”¨å…¬ç¶² IP è¨ªå•
echo.
echo âš ï¸  é‡è¦æç¤ºï¼š
echo   - å…¬ç¶² IP å¯èƒ½æœƒè®ŠåŒ–ï¼ˆå®¶åº­å¯¬å¸¶ï¼‰
echo   - å»ºè­°çµåˆ DDNS ä½¿ç”¨
echo   - ç¢ºä¿é˜²ç«ç‰†å…è¨±ç«¯å£è¨ªå•
echo.
set /p confirm="ç¢ºèªç²å–ç¶²çµ¡é…ç½®ä¿¡æ¯ï¼Ÿ(Y/N): "
if /i not "%confirm%"=="Y" goto MENU

call get_network_info.bat
goto MENU

:DDNS
cls
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æ–¹æ¡ˆ 3ï¼šDDNS è‡ªå‹•é…ç½®
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ’¡ å‰ç½®æ¢ä»¶ï¼š
echo   1. å·²è¨»å†Š DuckDNS å¸³è™Ÿï¼ˆhttps://www.duckdns.org/ï¼‰
echo   2. å·²å‰µå»ºå­åŸŸåï¼ˆå¦‚ï¼šzhuwei-techï¼‰
echo   3. å·²ç²å– DuckDNS Token
echo.
echo ðŸ“‹ è‡ªå‹•é…ç½®å°‡åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š
echo   1. ç²å–ç¶²çµ¡é…ç½®ä¿¡æ¯ï¼ˆæœ¬æ©Ÿ IPã€å…¬ç¶² IPï¼‰
echo   2. è¼¸å…¥ DuckDNS å­åŸŸåå’Œ Token
echo   3. æ¸¬è©¦ DDNS é€£æŽ¥
echo   4. è‡ªå‹•æ›´æ–°é…ç½®æ–‡ä»¶
echo   5. å‰µå»ºå®šæ™‚æ›´æ–°ä»»å‹™ï¼ˆå¯é¸ï¼‰
echo   6. é¡¯ç¤ºå®Œæ•´çš„è¨ªå•åœ°å€
echo.
echo âš ï¸  é‡è¦æç¤ºï¼š
echo   - è«‹æº–å‚™å¥½æ‚¨çš„ DuckDNS å­åŸŸåå’Œ Token
echo   - é…ç½®å¾Œä»éœ€è¨­ç½®è·¯ç”±å™¨ç«¯å£è½‰ç™¼
echo   - DDNS æœƒæ¯å°æ™‚è‡ªå‹•æ›´æ–° IP
echo.
set /p confirm="ç¢ºèªå•Ÿå‹• DDNS è‡ªå‹•é…ç½®ï¼Ÿ(Y/N): "
if /i not "%confirm%"=="Y" goto MENU

call setup_ddns.bat
goto MENU

:NETWORK_INFO
cls
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  ç¶²çµ¡é…ç½®ä¿¡æ¯
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
call get_network_info.bat
goto MENU

:GUIDE
cls
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  å®Œæ•´éƒ¨ç½²æŒ‡å—
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

if exist "ç¶²çµ¡éƒ¨ç½²æŒ‡å—.md" (
    echo âœ… æ­£åœ¨æ‰“é–‹éƒ¨ç½²æŒ‡å—æ–‡æª”...
    start ç¶²çµ¡éƒ¨ç½²æŒ‡å—.md
) else (
    echo âŒ æœªæ‰¾åˆ°éƒ¨ç½²æŒ‡å—æ–‡æª”
    echo.
)

pause
goto MENU

:END
cls
echo.
echo æ„Ÿè¬ä½¿ç”¨ç¯‰æœªç§‘æŠ€ç³»çµ±ï¼
echo.
echo ðŸ“ž éœ€è¦å¹«åŠ©ï¼Ÿ
echo    - æŸ¥çœ‹ç³»çµ±ä½¿ç”¨æ‰‹å†Š.md
echo    - é‹è¡Œ python test_all.py æ¸¬è©¦ç³»çµ±
echo    - æŸ¥çœ‹æœå‹™çµ‚ç«¯çš„éŒ¯èª¤æ—¥èªŒ
echo.
timeout /t 3 >nul
exit /b 0

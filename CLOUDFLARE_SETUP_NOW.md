# ğŸš€ ç«‹å³åŸ·è¡Œï¼šCloudflare åŸŸåé…ç½®

## âš¡ å¿«é€Ÿæ“ä½œæŒ‡å—ï¼ˆ5 åˆ†é˜å®Œæˆï¼‰

### ç¬¬ 1 æ­¥ï¼šé–‹å•Ÿ Cloudflare Zero Trust

**ç¶²å€**ï¼šhttps://one.dash.cloudflare.com/

### ç¬¬ 2 æ­¥ï¼šé€²å…¥ Tunnel è¨­å®š

1. å·¦å´é¸å–®é»æ“Š **Access**
2. é»æ“Š **Tunnels**
3. æ‰¾åˆ°ä½ çš„ Tunnelï¼ˆTunnel ID: `546fffc1-eb7d-4f9a-a3df-d30a1940aa0c`ï¼‰
4. é»æ“Š Tunnel åç¨±
5. é»æ“Š **Configure** æŒ‰éˆ•
6. åˆ‡æ›åˆ° **Public Hostname** æ¨™ç±¤

### ç¬¬ 3 æ­¥ï¼šæ·»åŠ ä¸»åŸŸå

é»æ“Š **"Add a public hostname"** æŒ‰éˆ•

#### é…ç½® 1ï¼šä¸»åŸŸå (zhe-wei.net)

```
Public hostname:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Subdomain: [ç•™ç©º - é‡è¦ï¼]      â”‚  â† é€™è£¡ä¸è¦å¡«ä»»ä½•æ±è¥¿
â”‚ Domain: zhe-wei.net            â”‚
â”‚ Path: [ç•™ç©º]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Service:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type: HTTP                     â”‚
â”‚ URL: gateway:80                â”‚  â† æ³¨æ„æ˜¯ gateway:80 ä¸æ˜¯ localhost
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

é»æ“Š **Save hostname**

#### é…ç½® 2ï¼šWWW å­åŸŸå (www.zhe-wei.net)

å†æ¬¡é»æ“Š **"Add a public hostname"**

```
Public hostname:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Subdomain: www                 â”‚  â† é€™æ¬¡å¡« www
â”‚ Domain: zhe-wei.net            â”‚
â”‚ Path: [ç•™ç©º]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Service:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type: HTTP                     â”‚
â”‚ URL: gateway:80                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

é»æ“Š **Save hostname**

---

## âœ… å®Œæˆå¾Œçš„åŸŸååˆ—è¡¨

ä½ æ‡‰è©²çœ‹åˆ°ä»¥ä¸‹åŸŸåï¼š

```
âœ… zhe-wei.net              â†’ gateway:80
âœ… www.zhe-wei.net          â†’ gateway:80
âœ… jarvis.zhe-wei.net       â†’ gateway:80
âœ… dify.zhe-wei.net         â†’ gateway:80
âœ… cms.zhe-wei.net          â†’ gateway:80
âœ… vision.zhe-wei.net       â†’ gateway:80
```

---

## ğŸ§ª é©—è­‰æ­¥é©Ÿ

### 1. ç­‰å¾… DNS ç”Ÿæ•ˆï¼ˆ10-30 ç§’ï¼‰

### 2. æ¸¬è©¦è¨ªå•

åœ¨ç€è¦½å™¨é–‹å•Ÿï¼š
- https://zhe-wei.net
- https://www.zhe-wei.net

æ‡‰è©²çœ‹åˆ° **Portal PWA** å…¥å£ç¶²ç«™ï¼

### 3. æ¸¬è©¦ PWA åŠŸèƒ½

- æŸ¥çœ‹æ˜¯å¦æœ‰å®‰è£æç¤º
- é»æ“Šå³ä¸‹è§’èŠå¤©åœ–æ¨™
- æ¸¬è©¦å°è©±åŠŸèƒ½

---

## ğŸ“¸ æˆªåœ–åƒè€ƒ

### Cloudflare æ§åˆ¶å°æ‡‰è©²çœ‹èµ·ä¾†åƒé€™æ¨£ï¼š

```
Public Hostnames
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hostname              Service         Status             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ zhe-wei.net          gateway:80      â— Active           â”‚
â”‚ www.zhe-wei.net      gateway:80      â— Active           â”‚
â”‚ jarvis.zhe-wei.net   gateway:80      â— Active           â”‚
â”‚ dify.zhe-wei.net     gateway:80      â— Active           â”‚
â”‚ cms.zhe-wei.net      gateway:80      â— Active           â”‚
â”‚ vision.zhe-wei.net   gateway:80      â— Active           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ é‡è¦æé†’

1. **Subdomain æ¬„ä½ç•™ç©º** = ä¸»åŸŸå
2. **Service URL å¿…é ˆæ˜¯ `gateway:80`**ï¼ˆä¸æ˜¯ localhost:8888ï¼‰
3. æ·»åŠ å¾Œç­‰å¾… 10-30 ç§’ DNS ç”Ÿæ•ˆ
4. å¦‚æœçœ‹åˆ°éŒ¯èª¤ï¼Œæª¢æŸ¥ Gateway æ˜¯å¦é‹è¡Œä¸­

---

## ğŸ†˜ å¦‚æœé‡åˆ°å•é¡Œ

### 404 Not Found
```bash
# é‡å•Ÿ Gateway
docker compose restart gateway
```

### 502 Bad Gateway
```bash
# æª¢æŸ¥ Portal æ˜¯å¦é‹è¡Œ
curl http://localhost:8888/health

# å¦‚æœå¤±æ•—ï¼Œé‡å•Ÿ Portal
docker compose restart portal
```

### DNS æœªè§£æ
- ç­‰å¾…æ›´é•·æ™‚é–“ï¼ˆæœ€å¤š 5 åˆ†é˜ï¼‰
- æ¸…é™¤ç€è¦½å™¨å¿«å–
- ä½¿ç”¨ç„¡ç—•æ¨¡å¼æ¸¬è©¦

---

## âœ¨ å®Œæˆå¾Œä½ å°±å¯ä»¥ï¼š

âœ… è¨ªå• https://zhe-wei.net çœ‹åˆ° Portal  
âœ… å®‰è£ PWA åˆ°æ¡Œé¢/æ‰‹æ©Ÿ  
âœ… ä½¿ç”¨å³æ™‚å°è©±åŠŸèƒ½  
âœ… é ç«¯æˆæ¬Š AI æ“ä½œ  
âœ… çµ±ä¸€ç®¡ç†æ‰€æœ‰æœå‹™  

---

**æº–å‚™å¥½äº†å—ï¼Ÿç¾åœ¨å°±å» Cloudflare æ·»åŠ åŸŸåå§ï¼** ğŸš€

å®Œæˆå¾Œå‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç«‹å³å¹«ä½ é©—è­‰ï¼

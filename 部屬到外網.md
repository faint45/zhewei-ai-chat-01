# 築未科技 — 部屬到外網

**用途**：說明如何讓築未大腦從外網存取；目前有 **Railway**（已上線）與 **Cloudflare Tunnel**（brain.zhe-wei.net）兩種方式。

---

## 一、Railway（已部屬，可直接用）

| 項目 | 網址 |
|------|------|
| **對外** | https://zhewei-ai-chat-01-production.up.railway.app |
| **管理介面** | https://zhewei-ai-chat-01-production.up.railway.app/admin |
| **健康檢查** | https://zhewei-ai-chat-01-production.up.railway.app/health |

無需本機 Docker，推送到 GitHub 後 Railway 自動部署；API keys 在 Railway 專案 **Variables** 設定。

---

## 二、Cloudflare Tunnel（brain.zhe-wei.net）

**外網網址**：https://brain.zhe-wei.net（DNS 已指向隧道）。

### 步驟

1. **啟動 Docker Desktop**（本機需已安裝 Docker）。
2. **設定 .env**：在專案根目錄的 `.env` 填寫：
   ```
   CLOUDFLARE_TOKEN=你的隧道Token
   ```
   Token 取得：https://one.dash.cloudflare.com → **Networks** → **Tunnels** → 你的隧道 → **Install connector** 或 **Reinstall** → 複製 Token。
3. **啟動服務**：在專案根目錄執行：
   ```powershell
   cd c:\Users\user\Desktop\zhe-wei-tech
   docker compose up -d
   ```
4. **確認**：`docker compose ps` 應看到 `zhewei_brain`、`tunnel` 為 Up；瀏覽器開啟 https://brain.zhe-wei.net/admin 或 /health。

### 若出現錯誤

- **「找不到 dockerDesktopLinuxEngine」**：請先啟動 **Docker Desktop**，再執行 `docker compose up -d`。
- **Error 1033 / 無法解析**：表示 cloudflared 未連上或 Token 錯誤；檢查 `.env` 之 `CLOUDFLARE_TOKEN`，執行 `docker compose down` 後再 `docker compose up -d`。
- 詳見 **brain.zhe-wei.net_無法登入排查.md**。

---

## 三、對照

| 方式 | 外網網址 | 條件 |
|------|----------|------|
| **Railway** | https://zhewei-ai-chat-01-production.up.railway.app | 已部署；Variables 設 API keys |
| **Cloudflare Tunnel** | https://brain.zhe-wei.net | 本機 Docker Desktop + .env 有 CLOUDFLARE_TOKEN，執行 docker compose up -d |

---

*外網部屬完成後，管理介面與健康檢查可依上表網址存取。*
